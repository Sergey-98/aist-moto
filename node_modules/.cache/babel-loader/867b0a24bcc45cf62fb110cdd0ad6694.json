{"ast":null,"code":"import React,{useContext,useRef}from'react';import styles from'./ModalCallback.module.css';import{Context}from'../../Context/Context';import Close from'../UI/Button/Close';import Swal from'sweetalert2';import emailjs from'emailjs-com';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ModalCallback(){var _useContext=useContext(Context),formCallbackState=_useContext.formCallbackState,formCallbackDispatch=_useContext.formCallbackDispatch,state=_useContext.state,dispatch=_useContext.dispatch;var form=useRef(null);var sendEmail=function sendEmail(event){event.preventDefault();if(form.current){emailjs.sendForm('service_ksceqzu','template_v8msxyq',form.current,'a16Nmw3f7CqETrIRS').then(function(result){console.log(result.text);Swal.fire('Good job!','Ваша заявка успешно отправлена','success');resetForm();},function(error){console.log(error.text);Swal.fire({icon:'error',title:'Oops...',text:'Сервис временно недоступен. Попробуйте повторить запрос через несколько минут'});});}};var resetForm=function resetForm(){if(formCallbackDispatch){var _form$current;(_form$current=form.current)===null||_form$current===void 0?void 0:_form$current.reset();formCallbackDispatch({type:'phoneNumber',payloadFormCallback:{phoneNumber:''}});formCallbackDispatch({type:'name',payloadFormCallback:{name:''}});dispatch({type:'resetModalCallback',payload:{isOpenModalCallback:false}});}};var inputText=function inputText(event){if(formCallbackDispatch){formCallbackDispatch({type:'name',payloadFormCallback:{name:event.target.value}});}};var inputNumber=function inputNumber(event){if(formCallbackDispatch){formCallbackDispatch({type:'phoneNumber',payloadFormCallback:{phoneNumber:event.target.value}});}};var changeModal=function changeModal(){if(state.isOpenModalCallback){if(dispatch){dispatch({type:'resetModalCallback',payload:{isOpenModalCallback:false}});}}else{if(dispatch){dispatch({type:'resetModalCallback',payload:{isOpenModalCallback:true}});}}};return state.isOpenModalCallback?/*#__PURE__*/_jsxs(\"section\",{className:styles.modal_container,children:[/*#__PURE__*/_jsx(\"span\",{className:styles.modal_close,children:/*#__PURE__*/_jsx(Close,{onClick:changeModal})}),/*#__PURE__*/_jsxs(\"span\",{className:styles.modal__title_block,children:[/*#__PURE__*/_jsx(\"h3\",{className:styles.modal__title,children:\"\\u0417\\u0430\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C \\u0437\\u0432\\u043E\\u043D\\u043E\\u043A\"}),/*#__PURE__*/_jsx(\"p\",{className:styles.modal__title_text,children:\"\\u0423\\u043A\\u0430\\u0436\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448\\u0438 \\u043A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442\\u043D\\u044B\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u0438 \\u043C\\u044B \\u0441\\u0432\\u044F\\u0436\\u0435\\u043C\\u0441\\u044F \\u0441 \\u0432\\u0430\\u043C\\u0438 \\u0432 \\u0431\\u043B\\u0438\\u0436\\u0430\\u0439\\u0448\\u0435\\u0435 \\u0432\\u0440\\u0435\\u043C\\u044F\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:styles.modal_container__form,onSubmit:sendEmail,ref:form,children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{className:styles.input__text,value:formCallbackState.name,name:\"name\",placeholder:'Имя',autoComplete:\"nope\",type:\"text\",onChange:inputText}),/*#__PURE__*/_jsx(\"span\",{className:formCallbackState.errorName?'error-text':'none',children:formCallbackState.errorName})]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{className:styles.input__text,name:\"phone\",value:formCallbackState.phoneNumber,placeholder:'Номер телефона',autoComplete:\"nope\",type:\"tel\",onChange:inputNumber}),/*#__PURE__*/_jsx(\"span\",{className:formCallbackState.errorNumber?'error-text':'none',children:formCallbackState.errorNumber})]}),/*#__PURE__*/_jsx(\"input\",{className:styles.input__submit,value:'Заказать звонок',type:'submit'})]})]}):null;}","map":{"version":3,"names":["React","useContext","useRef","styles","Context","Close","Swal","emailjs","ModalCallback","formCallbackState","formCallbackDispatch","state","dispatch","form","sendEmail","event","preventDefault","current","sendForm","then","result","console","log","text","fire","resetForm","error","icon","title","reset","type","payloadFormCallback","phoneNumber","name","payload","isOpenModalCallback","inputText","target","value","inputNumber","changeModal","modal_container","modal_close","modal__title_block","modal__title","modal__title_text","modal_container__form","input__text","errorName","errorNumber","input__submit"],"sources":["D:/Папки пользователя/Desktop/Сайты/Aist-C moto/src/components/ModalCallback/ModalCallback.tsx"],"sourcesContent":["import React, { useContext, useRef } from 'react';\r\nimport styles from './ModalCallback.module.css';\r\nimport { Context } from '../../Context/Context';\r\nimport Close from '../UI/Button/Close';\r\nimport Swal from 'sweetalert2';\r\nimport emailjs from 'emailjs-com';\r\n\r\nexport default function ModalCallback() {\r\n  const { formCallbackState, formCallbackDispatch, state, dispatch } = useContext(Context);\r\n  const form = useRef<HTMLFormElement>(null);\r\n\r\n  const sendEmail = (event: React.FormEvent) => {\r\n    event.preventDefault();\r\n    if (form.current) {\r\n      emailjs\r\n        .sendForm('service_ksceqzu', 'template_v8msxyq', form.current, 'a16Nmw3f7CqETrIRS')\r\n        .then(\r\n          (result) => {\r\n            console.log(result.text);\r\n            Swal.fire('Good job!', 'Ваша заявка успешно отправлена', 'success');\r\n            resetForm();\r\n          },\r\n          (error) => {\r\n            console.log(error.text);\r\n            Swal.fire({\r\n              icon: 'error',\r\n              title: 'Oops...',\r\n              text: 'Сервис временно недоступен. Попробуйте повторить запрос через несколько минут',\r\n            });\r\n          }\r\n        );\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    if (formCallbackDispatch) {\r\n      form.current?.reset();\r\n      formCallbackDispatch({ type: 'phoneNumber', payloadFormCallback: { phoneNumber: '' } });\r\n      formCallbackDispatch({ type: 'name', payloadFormCallback: { name: '' } });\r\n      dispatch({ type: 'resetModalCallback', payload: { isOpenModalCallback: false } });\r\n    }\r\n  };\r\n\r\n  const inputText = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (formCallbackDispatch) {\r\n      formCallbackDispatch({ type: 'name', payloadFormCallback: { name: event.target.value } });\r\n    }\r\n  };\r\n  const inputNumber = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (formCallbackDispatch) {\r\n      formCallbackDispatch({\r\n        type: 'phoneNumber',\r\n        payloadFormCallback: { phoneNumber: event.target.value },\r\n      });\r\n    }\r\n  };\r\n  const changeModal = () => {\r\n    if (state.isOpenModalCallback) {\r\n      if (dispatch) {\r\n        dispatch({ type: 'resetModalCallback', payload: { isOpenModalCallback: false } });\r\n      }\r\n    } else {\r\n      if (dispatch) {\r\n        dispatch({ type: 'resetModalCallback', payload: { isOpenModalCallback: true } });\r\n      }\r\n    }\r\n  };\r\n\r\n  return state.isOpenModalCallback ? (\r\n    <section className={styles.modal_container}>\r\n      <span className={styles.modal_close}>\r\n        <Close onClick={changeModal}></Close>\r\n      </span>\r\n      <span className={styles.modal__title_block}>\r\n        <h3 className={styles.modal__title}>Заказать звонок</h3>\r\n        <p className={styles.modal__title_text}>\r\n          Укажите ваши контактные данные и мы свяжемся с вами в ближайшее время\r\n        </p>\r\n      </span>\r\n      <form className={styles.modal_container__form} onSubmit={sendEmail} ref={form}>\r\n        <label>\r\n          <input\r\n            className={styles.input__text}\r\n            value={formCallbackState.name}\r\n            name=\"name\"\r\n            placeholder={'Имя'}\r\n            autoComplete=\"nope\"\r\n            type=\"text\"\r\n            onChange={inputText}\r\n          />\r\n          <span className={formCallbackState.errorName ? 'error-text' : 'none'}>\r\n            {formCallbackState.errorName}\r\n          </span>\r\n        </label>\r\n        <label>\r\n          <input\r\n            className={styles.input__text}\r\n            name=\"phone\"\r\n            value={formCallbackState.phoneNumber}\r\n            placeholder={'Номер телефона'}\r\n            autoComplete=\"nope\"\r\n            type=\"tel\"\r\n            onChange={inputNumber}\r\n          />\r\n          <span className={formCallbackState.errorNumber ? 'error-text' : 'none'}>\r\n            {formCallbackState.errorNumber}\r\n          </span>\r\n        </label>\r\n        <input className={styles.input__submit} value={'Заказать звонок'} type={'submit'} />\r\n      </form>\r\n    </section>\r\n  ) : null;\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}